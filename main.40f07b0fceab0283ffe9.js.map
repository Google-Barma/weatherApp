{"version":3,"sources":["webpack:///./templates/currentWeather.hbs","webpack:///./js/refs.js","webpack:///./js/weatherApi.js","webpack:///./js/getCurrentPosition.js","webpack:///./js/createWeatherMarkup.js","webpack:///./js/queryForm.js","webpack:///./js/app.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","refs","queryForm","document","querySelector","currentCityWeatherWrapper","option","apiKey","baseURL","queryCityName","cityCurrentWeather","currentWeather","currentPosition","fetchFetchCurrentWeatherInCity","url","fetch","response","json","weather","main","name","sys","timezone","getWeatherData","alert","fetchCurrentGeolocationWeather","console","log","setCityNameToUrl","value","this","position","currentTemp","Math","round","temp","maxTemp","temp_max","minTemp","temp_min","weatherDescription","description","weatherDescriptionIcon","icon","createWeatherMarkup","weatherObj","markup","currentWeatherTemplate","insertAdjacentHTML","addEventListener","event","preventDefault","city","target","elements","query","weatherApi","getInputCity","then","latitude","catch","error","timeout","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","coords","setTimeout"],"mappings":"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","file":"main.40f07b0fceab0283ffe9.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"weather__block\\\">\\n    <h3 class=\\\"weather__title\\\">Город: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"name\") || (depth0 != null ? lookupProperty(depth0,\"name\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":38},\"end\":{\"line\":2,\"column\":46}}}) : helper)))\n    + \"</h3>\\n    <p class=\\\"weather__temp\\\">Температура: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"currentTemp\") || (depth0 != null ? lookupProperty(depth0,\"currentTemp\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"currentTemp\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":42},\"end\":{\"line\":3,\"column\":57}}}) : helper)))\n    + \"</p>\\n    <p class=\\\"weather__max-temp\\\">Макс. температура: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"maxTemp\") || (depth0 != null ? lookupProperty(depth0,\"maxTemp\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"maxTemp\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":52},\"end\":{\"line\":4,\"column\":63}}}) : helper)))\n    + \"</p>\\n    <p class=\\\"weather__max-temp\\\">Мин. температура: \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"minTemp\") || (depth0 != null ? lookupProperty(depth0,\"minTemp\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"minTemp\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":5,\"column\":51},\"end\":{\"line\":5,\"column\":62}}}) : helper)))\n    + \"</p>\\n    <p class=\\\"weather__description\\\">\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"weatherDescription\") || (depth0 != null ? lookupProperty(depth0,\"weatherDescription\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"weatherDescription\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":36},\"end\":{\"line\":6,\"column\":58}}}) : helper)))\n    + \"</p>\\n    <p class=\\\"weather__date\\\">Сегодня: </p>\\n    <img src=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"weatherDescriptionIcon\") || (depth0 != null ? lookupProperty(depth0,\"weatherDescriptionIcon\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"weatherDescriptionIcon\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":13},\"end\":{\"line\":8,\"column\":39}}}) : helper)))\n    + \" alt=\\\"weather image\\\" class=\\\"weather__image\\\">\\n\\n</div>\";\n},\"useData\":true});","const refs = {\n  queryForm: document.querySelector('.js-town-query__form'),\n  currentCityWeatherWrapper: document.querySelector(\n    '.js-current-city__weather',\n  ),\n};\n\nexport default refs;\n","export default {\n  apiKey: '&appid=e8a30fe387c8d6d768122e7ce2ffee5c',\n  baseURL: 'api.openweathermap.org/data/2.5/weather',\n  queryCityName: '',\n  cityCurrentWeather: {},\n  currentWeather: {},\n  currentPosition: {},\n\n  async fetchFetchCurrentWeatherInCity() {\n    const url = `https://api.openweathermap.org/data/2.5/weather?q=${this.queryCityName}&units=metric&lang=ru&appid=e8a30fe387c8d6d768122e7ce2ffee5c`;\n\n    try {\n      const response = await fetch(url);\n      const { weather, main, name, sys, timezone } = await response.json();\n\n      this.getWeatherData(this.cityCurrentWeather, {\n        weather,\n        main,\n        name,\n      });\n\n      return this.cityCurrentWeather;\n    } catch (error) {\n      alert('Нет такого города');\n    }\n  },\n\n  async fetchCurrentGeolocationWeather() {\n    // const url = `http://api.openweathermap.org/data/2.5/weather?q=lat=${this.currentPosition.latitude}&lon=${this.currentPosition.longitude}&units=metric&lang=ru&appid=e8a30fe387c8d6d768122e7ce2ffee5c`;\n    const url =\n      'https://raw.githubusercontent.com/Google-Barma/weatherApp/master/src/temp.json';\n\n    try {\n      const response = await fetch(url);\n      const { weather, main, name, sys, timezone } = await response.json();\n\n      this.getWeatherData(this.currentWeather, {\n        weather,\n        main,\n        name,\n      });\n\n      return this.currentWeather;\n    } catch (error) {\n      console.log(error);\n    }\n  },\n\n  setCityNameToUrl(value) {\n    this.queryCityName = value;\n  },\n\n  getWeatherData(position, { weather, main, name }) {\n    position.currentTemp = Math.round(main.temp);\n    position.maxTemp = Math.round(main.temp_max);\n    position.minTemp = Math.round(main.temp_min);\n    position.weatherDescription = weather[0].description;\n    position.name = name;\n    position.weatherDescriptionIcon = `https://openweathermap.org/img/wn/${weather[0].icon}@2x.png`;\n  },\n};\n","import weatherApi from './weatherApi';\n\nfunction getCurrentPosition() {\n  const option = {\n    timeout: 5000,\n  };\n\n  return new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject, option);\n  });\n}\n\ngetCurrentPosition()\n  .then(resolve => {\n    weatherApi.currentPosition = resolve.coords;\n  })\n  .catch(error => console.log(error));\n","import currentWeatherTemplate from '../templates/currentWeather.hbs';\nimport refs from './refs';\n\nexport default function createWeatherMarkup(weatherObj) {\n  const markup = currentWeatherTemplate(weatherObj);\n\n  refs.currentCityWeatherWrapper.insertAdjacentHTML('beforeend', markup);\n}\n","import refs from './refs';\nimport weatherApi from './weatherApi';\nimport createWeatherMarkup from './createWeatherMarkup';\n\nrefs.queryForm.addEventListener('submit', handleSubmitBtn);\n\nfunction handleSubmitBtn(event) {\n  event.preventDefault();\n\n  getInputCity(event);\n  getCurrentWeatherInCity();\n}\n\nfunction getInputCity(event) {\n  const city = event.target.elements.query.value;\n  weatherApi.setCityNameToUrl(city);\n}\n\nfunction getCurrentWeatherInCity() {\n  weatherApi\n    .fetchFetchCurrentWeatherInCity()\n    .then(data => {\n      createWeatherMarkup(data);\n      console.log(weatherApi.currentPosition.latitude);\n    })\n    .catch(error => console.log(error));\n}\n","import weatherApi from './weatherApi';\nimport createWeatherMarkup from './createWeatherMarkup';\n\nfunction getCurrentWeather() {\n  weatherApi\n    .fetchCurrentGeolocationWeather()\n    .then(data => {\n      createWeatherMarkup(data);\n    })\n    .catch(error => console.log(error));\n}\n\nsetTimeout(() => {\n  getCurrentWeather();\n}, 1000);\n"],"sourceRoot":""}